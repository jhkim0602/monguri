# λ―Έν… μ‹ μ²­ λ° μ¤μΌ€μ¤„λ§ μ‹μ¤ν… κ³ λ„ν™” κΈ°νμ„

## 1. κ°μ”
λ©ν‹°κ°€ μ±„ν…λ°©μ—μ„ λ‹Ήκ·Όλ§μΌ“ κ±°λ μ•½μ†μ²λΌ μ‰½κ³  μ§κ΄€μ μΌλ΅ λ―Έν…μ„ μ‹ μ²­ν•κ³ , λ©ν† κ°€ μ΄λ¥Ό μ¤μΌ€μ¤„ νμ΄μ§€μ—μ„ κ΄€λ¦¬ν•λ©°, λ¨λ“  μƒνƒ λ³€ν™”κ°€ μ±„ν…λ°© λ‚΄ μΈν„°λ™ν‹°λΈ λ©”μ‹μ§€λ΅ κ³µμ λλ” μ‹μ¤ν…μ…λ‹λ‹¤.

## 2. ν•µμ‹¬ μ‹λ‚λ¦¬μ¤
1.  **μ‹ μ²­ (λ©ν‹°)**: μ±„ν…λ°© '+' λ©”λ‰΄ -> 'λ―Έν… μ‹ μ²­' -> λ¨λ‹¬ νΌ μ‘μ„±(μ£Όμ , ν¬λ§μ‹κ°„) -> μ „μ†΅.
2.  **μ•λ¦Ό (κ³µν†µ)**: μ±„ν…λ°©μ— **"λ―Έν… μ‹ μ²­μΉ΄λ“"** ν•νƒμ νΉμ λ©”μ‹μ§€ μ „μ†΅.
3.  **ν™•μ •/μ΅°μ • (λ©ν† )**:
    *   **μ±„ν…λ°©**: "μλ½ν•κΈ°", "μΌμ • λ³€κ²½" λ²„νΌ λ…Έμ¶.
    *   **μ¤μΌ€μ¤„ νμ΄μ§€**: μΊλ¦°λ” λ° μ”μ²­ λ©λ΅μ—μ„ ν™•μΈ λ° μ²λ¦¬.
4.  **κ²°κ³Ό κ³µμ **: λ©ν† κ°€ μλ½/λ³€κ²½ μ‹ μ±„ν…λ°©μ "λ―Έν… μ‹ μ²­μΉ΄λ“" μƒνƒκ°€ μ‹¤μ‹κ°„ μ—…λ°μ΄νΈ (μ: 'λ€κΈ°μ¤‘' -> 'ν™•μ •λ¨' + μ¤ λ§ν¬).

## 3. κΈ°λ¥ μƒμ„Έ λ° UI/UX

### A. λ―Έν… μ‹ μ²­ νΌ (Modal/Bottom Sheet)
*   **μ…λ ¥ ν•­λ©**:
    *   λ―Έν… μ£Όμ  (ν…μ¤νΈ)
    *   ν¬λ§ μΌμ‹ (λ‚ μ§ λ° μ‹κ°„ μ„ νƒ, λ³µμ μ„ νƒ κ°€λ¥ν•λ„λ΅ κ³ λ ¤)
    *   μ‚¬μ „ λ©”λ¨
*   **λ™μ‘**: μ‘μ„± μ™„λ£ μ‹ DB `meeting_requests` μƒμ„± λ° `chat_messages`μ— μ‹μ¤ν… λ©”μ‹μ§€ μ‚½μ….

### B. μΈν„°λ™ν‹°λΈ μ±„ν… λ©”μ‹μ§€ (Meeting Request Card)
*   **λ””μμΈ**: μΌλ° λ§ν’μ„ κ³Ό κµ¬λ³„λλ” 'μΉ΄λ“' ν•νƒ (λ‹Ήκ·Όλ§μΌ“ 'μ•½μ† μ΅κΈ°' μ°Έμ΅°).
*   **μƒνƒλ³„ UI**:
    *   **PENDING (λ€κΈ°)**:
        *   (λ©ν‹°): "μ”μ²­μ„ λ³΄λƒμµλ‹λ‹¤. λ©ν† λ‹μ ν™•μΈμ„ κΈ°λ‹¤λ¦¬κ³  μμ–΄μ”."
        *   (λ©ν† ): "OOO ν•™μƒμ΄ μƒλ‹΄μ„ μ”μ²­ν–μ–΄μ”." + [μλ½] λ²„νΌ.
    *   **CONFIRMED (ν™•μ •)**:
        *   "π“… λ―Έν…μ΄ ν™•μ •λμ—μµλ‹λ‹¤."
        *   μΌμ‹, μ£Όμ  ν‘μ‹.
        *   "μ¤ λ§ν¬ λ°”λ΅κ°€κΈ°" λ²„νΌ ν™μ„±ν™”.
    *   *(MVP μ μ™Έ: μΌμ • μ΅°μ • κΈ°λ¥μ€ μ¶”ν›„ κµ¬ν„)*

### B. λ©ν†  μ¤μΌ€μ¤„ νμ΄μ§€ (`/schedule`)
*   **μ—°λ™**: `meeting_requests` ν…μ΄λΈ” λ°μ΄ν„°λ¥Ό λ¶λ¬μ™€ μ—°λ™. **Supabase MCP**λ¥Ό ν™μ©ν•μ—¬ λ°μ΄ν„°λ² μ΄μ¤ λ³€κ²½μ‚¬ν•­ κ΄€λ¦¬.
*   **μ•„ν‚¤ν…μ²**: `AiContext/Backend_Patterns.md`μ **Pattern A** (Route Handler -> Service -> Repository) μ¤€μ.
*   **κΈ°λ¥**: μ”μ²­ μΉ΄λ“μ—μ„ [μλ½] ν΄λ¦­ μ‹ -> `CONFIRMED` μƒνƒ λ³€κ²½ -> μ±„ν…λ°© λ©”μ‹μ§€ μƒνƒ μ—…λ°μ΄νΈ.

## 4. λ°μ΄ν„°λ² μ΄μ¤ μ„¤κ³„ (Supabase MCP ν™μ©)

### `meeting_requests` ν…μ΄λΈ”
| Column | Type | Description |
| :--- | :--- | :--- |
| `id` | UUID | PK |
| `mentor_mentee_id` | UUID | FK (μ±„ν…λ°© μ—°κ²°) |
| `requestor_id` | UUID | FK (μ”μ²­μ) |
| `topic` | Text | μƒλ‹΄ μ£Όμ  |
| `preferred_times` | JSONB | ν¬λ§ μ‹κ°„ ν›„λ³΄κµ° |
| `confirmed_time` | Timestamp | ν™•μ •λ μ‹κ°„ |
| `status` | Enum | `PENDING`, `CONFIRMED`, `REJECTED` |
| `zoom_link` | Text | λ―Έν… λ§ν¬ |
| `created_at` | Timestamp | μƒμ„±μΌ |

### `chat_messages` ν…μ΄λΈ” μμ •
*   `message_type` μ»¬λΌμ— `MEETING_REQUEST` νƒ€μ… μ¶”κ°€ (κΈ°μ΅΄: text, image, file).
*   `metadata` λλ” `content_payload` μ»¬λΌ(JSONB)μ„ μ¶”κ°€ν•μ—¬ `meeting_request_id`λ¥Ό μ°Έμ΅°ν•κ±°λ‚, `body`μ— IDλ¥Ό μ €μ¥ν•κ³  νƒ€μ…μΌλ΅ κµ¬λ¶„.

## 5. κµ¬ν„ λ‹¨κ³„ (Roadmap)

1.  **DB μ¤ν‚¤λ§ κµ¬μ„±**: Supabase ν…μ΄λΈ” μƒμ„± λ° RLS μ •μ±… μ„¤μ •.
2.  **λ―Έν… μ‹ μ²­ νΌ κµ¬ν„**: λ©ν‹°μ© μ±„ν… ν•μ„ μ»΄ν¬λ„νΈ.
3.  **μ±„ν… λ©”μ‹μ§€ κ³ λ„ν™”**: `MeetingRequestCard` μ»΄ν¬λ„νΈ κ°λ° λ° λ©”μ‹μ§€ λ λ”λ§ λ΅μ§ λ¶„κΈ°.
4.  **μ¤μΌ€μ¤„ νμ΄μ§€ μ—°λ™**: λ©ν†  νμ΄μ§€μ—μ„ μ‹¤μ  λ°μ΄ν„° Read/Write κµ¬ν„.
5.  **μ‹¤μ‹κ°„ μ—°λ™**: `postgres_changes`λ¥Ό ν†µν•΄ μ”μ²­ μƒνƒ λ³€κ²½ μ‹ μ±„ν…λ°© μΉ΄λ“ UI μ¦‰μ‹ λ°μ.

---
**μ΄ κΈ°νμΌλ΅ μ§„ν–‰ν•μ‹κ² μµλ‹κΉ? μΉμΈν•μ‹λ©΄ 1λ‹¨κ³„ DB μ¤ν‚¤λ§ κµ¬μ„±λ¶€ν„° μ‹μ‘ν•κ² μµλ‹λ‹¤.**
